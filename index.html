<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="description" content="proof of humanity tools">
    <meta name="author" content="spooky"><link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato&family=Metal+Mania&family=Special+Elite&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUMANITY.TOOLS</title>
    <script src="rain.js"></script>
    <link rel="icon" 
      type="image/png" 
      href="favicon-32x32.png" />
</head>
<style type="text/css">
body{
    font-family: 'Lato', sans-serif;
    font-weight: bold;
    background: whitesmoke;
    font-weight: lighter;
    margin: 20px;
    color: purple;
    text-align: center;
}
.droplets {
    position: fixed;
    top: -1vh;
    font-size: 2rem;
    transform: translateY(0);
    animation: fall 3s linear forwards;
}
.droplets1 {
    position: fixed;
    top: -1vh;
    font-size: 1rem;
    transform: translateY(0);
    animation: fall 3s linear forwards;
}
.header {
  text-align: center;
  width: 100%;
  font-family: 'Metal Mania', cursive;
  font-size: 106px;
  font-weight: bold;
  color: #eee;
}

@media(max-width: 800px) {
  .header {
    font-size: 46px;
  }
}

.blood {
       color:#eee;
       -webkit-text-stroke-width: 1px;
       -webkit-text-stroke-color: black;
       text-shadow:
       4px 4px 1px #26004d,
       4px 6px 1px #330066,
       4px 8px 1px #400080,
       4px 10px 1px #4d0099,
       4px 12px 1px #5900b3,
       4px 14px 1px #6600cc,
       4px 16px 1px #7300e6,
       4px 18px 1px #8000ff,
       4px 20px 1px #8c1aff,
       4px 22px 1px #9933ff,
       4px 24px 1px #a64dff,
       4px 26px 1px #b366ff,
       4px 28px 1px #bf80ff,
       4px 30px 1px #cc99ff,
       4px 32px 1px #d9b3ff,
       4px 34px 1px #e6ccff,
       4px 36px 1px #f2e6ff,
       4px 38px 1px #eee;
}


@keyframes fall {
    to {
        transform: translateY(150vh);
    }
}

.blue_pink{
    background: linear-gradient(90deg, #FC466B 0%, #3F5EFB 100%);
    background: -webkit-linear-gradient(90deg, #FC466B 0%, #3F5EFB 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
.green_blue{
    background: linear-gradient(90deg, #0700b8 0%, #00ff88 100%);
    background: -webkit-linear-gradient(90deg, #0700b8 0%, #00ff88 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.rw{
    background: linear-gradient(90deg, #FDBB2D 0%, #22C1C3 100%);
    background: -webkit-linear-gradient(90deg, #FDBB2D 0%, #22C1C3 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
}
.cw{
    background: linear-gradient(90deg, #e3ffe7 0%, #d9e7ff 100%);
    background: -webkit-linear-gradient(90deg, #e3ffe7 0%, #d9e7ff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
}
.bm{ 
    background: linear-gradient(90deg, #d53369 0%, #daae51 100%);
    background: -webkit-linear-gradient(90deg, #d53369 0%, #daae51 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
}

b {
    color: purple;
}
a{ 
    color: purple;
    text-decoration: none;
    font-weight: bold;
    font-size: 16px;
}

a:hover{
    -webkit-transition: background-color 500ms linear;
    -ms-transition: background-color 500ms linear;
    transition: background-color 500ms linear;
}
.ht:hover{ 
    background: linear-gradient(90deg, #FC466B 0%, #3F5EFB 100%);
    background: -webkit-linear-gradient(90deg, #FC466B 0%, #3F5EFB 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
}

.gba:hover{ 
    background: linear-gradient(90deg, #0700b8 0%, #00ff88 100%);
    background: -webkit-linear-gradient(90deg, #0700b8 0%, #00ff88 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
}

.ubi:hover{ 
    background: linear-gradient(90deg, #FDBB2D 0%, #22C1C3 100%);
    background: -webkit-linear-gradient(90deg, #FDBB2D 0%, #22C1C3 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
}


.cv:hover{ 
     background: linear-gradient(90deg, #e3ffe7 0%, #d9e7ff 100%);
    background: -webkit-linear-gradient(90deg, #e3ffe7 0%, #d9e7ff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
}

.rs:hover{ 
    background: linear-gradient(90deg, #d53369 0%, #daae51 100%);
    background: -webkit-linear-gradient(90deg, #d53369 0%, #daae51 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
}

</style>
<body>
<script src="https://cdn.ethers.io/lib/ethers-5.1.umd.min.js" type="text/javascript">
</script>
<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
<script type="text/javascript">

async function start(){
    async function getActiveToken(){
        let isIPFS = false
        // let name = await ubgContract.name()
        let name = ""
        let idx = await ubgContract.activeNFTindex()
        let tokenURI = await ubgContract.tokenURI(0) 

        if(tokenURI.substring(0, 7) == 'ipfs://'){
            isIPFS = true
            tokenURI = tokenURI.replace('ipfs://', '');
            tokenURI = tokenURI.replace('ipfs/', '');
            tokenURI = "https://ipfs.io/ipfs/"+tokenURI
        }

        await axios.get(tokenURI)
            .then(async(res) => {
                console.log(res.data)
                let image = ""
                if(isIPFS){
                  let im = res.data.image.replace('ipfs://', '');
                  im = im.replace('ipfs/', '');
                  image = "https://ipfs.io/ipfs/"+im;
                }else{
                  image = res.data.image
                }
                name = res.data.name
                $('#nft_name').text(name)
                $('#ubg').attr('src', image)
            })
            .catch((error)=>{
                console.log(error)
                return false
            })

        // setTimeout(this.getActiveTokenLoop, 14000)
        ubgContract.on("Displaying", (sender, nft, idx) => {
            console.log(sender, nft, idx)
            getActiveTokenLoop()
        });
    }

    const ubg_abi = [
        "event Displaying(address _sender, address _nft, uint256 index)",
        "function activeNFTindex() public view returns (uint256)",
        "function lastUpdate() public view returns (uint256)",
        "function cost() public view returns (uint256)",
        "function display(address _add, uint256 _idx) external",
        "function name() public view returns (string memory)",
        "function tally() public view returns (uint256)",
        "function symbol() public view returns (string memory)",
        "function tokenURI(uint256 tokenId) public view returns (string memory)",
        "function burnPaymentToken() external",
        "function updatePrice() external",
    ]
    const ubg_address = "0x45527f75E9e69900Dd1A9C9e8af1240D4C5C9E89"
    // const provider = await new ethers.providers.Web3Provider(window.ethereum)
    const provider = await new ethers.providers.InfuraProvider("mainnet")
    const ubgContract = new ethers.Contract(ubg_address, ubg_abi, provider)
    getActiveToken()
}

start()
</script>

<div class="header ">
  <span class="blood">HUMANITY.TOOLS</span>
</div>
<br><br>

    <img id="ubg" src="" style="max-width: 50%;min-width: 300px;">
    <i><p id="nft_name"></p></i>
    <small>Change the artwork by burning UBI at the <a href="https://universal.basic.gallery/">Universal Basic Gallery</a></small>
    <br><br>
    <hr><br><br>
    <a class="ht" href="https://graph.humanity.tools">graph.humanity.tools</a>
    <br><br>
    <a class="ht" href="https://faces.humanity.tools">faces.humanity.tools</a>
    <br><br>
    <a class="ht" href="https://list.humanity.tools">list.humanity.tools</a>
    <br><br><br>
    <hr>
    <h2 span class="green_blue">PoH</h2>
    <a class="gba" href="https://www.proofofhumanity.id/">Proof of Humanity</a>
    <br><br>
    <a class="gba" href="https://kleros.gitbook.io/docs/products/proof-of-humanity/proof-of-humanity-tutorial">Proof of Humanity Tutorial</a>
    <br><br>
    <a class="gba" href="https://ipfs.kleros.io/ipfs/Qmc7ag5XohnSAozvsKsLCUbvaFyasyLtyi3H7g3mmxznPU/proof-of-humanity-registry-policy.pdf">Proof of Humanity Guidelines [PDF]</a>
    <br><br>
    <a class="gba" href="https://gov.proofofhumanity.id/">gov.proofofhumanity.id</a>
    <br><br>
    <a class="gba" href="https://snapshot.org/#/poh.eth/">PoH Snapshot</a>
    <br><br>
    <a class="gba" href="https://api.poh.dev/docs/static/index.html">PoH REST API</a> | <a class="gba" href="https://api-kovan.poh.dev/docs/static/index.html">[kovan]</a>
    <br><br>
    <a class="gba" href="https://thegraph.com/explorer/subgraph/kleros/proof-of-humanity-mainnet">Graph Protocol</a> | <a class="gba" href="https://thegraph.com/explorer/subgraph/kleros/proof-of-humanity-kovan">[kovan]</a>
    <br><br><br>
    <hr>
    <h2 class="rw">UBI</h2>
    <a class="ubi" href="https://democracy.earth/">Democracy.Earth Humanitarian Vaults</a>
    <br><br>
    <a class="ubi" href="https://pools.proofofhumanity.id/">Proof Of Humanity Pools</a>
    <br><br>
    <a class="ubi" href="https://vfat.tools/proofofhumanity/">UBI Farming Calculator</a>
    <br><br>
    <a class="ubi" href="https://ubi-rebel-alliance.gitbook.io/handbook/">UBI Rebel Alliance</a>
    <br><br>
    <a class="ubi" href="https://ubi.kalland.com/">Add UBI to MetaMask</a>
    <br><br>
    <a class="ubi" href="https://v2.info.uniswap.org/token/0xDd1Ad9A21Ce722C151A836373baBe42c868cE9a4">Uniswap Token Info</a>
    <br><br><br>
    <hr>
    <h2 class="cw">Crowdvoucher</h2>
    <a class="cv" href="https://mateoneira.com/poh_crowdvoucher/">mateoneira.com/poh_crowdvoucher</a>
    <br><br>
    <a class="cv" href="https://t.me/joinchat/OQH0QZHmEr5hZTJh">Crowdvoucher Telegram</a>
    <br><br><br>
    <hr>
    <h2 class="bm">Related Sites</h2>

    <a class="rs" href="https://kleros.io/">Kleros</a>
    <br><br><br>
    <hr><br>
    <b>Something to Add?</b>
    <br><br>
    Submit a Pull Request -> <a href="https://github.com/isaac-art/humanity.tools">https://github.com/isaac-art/humanity.tools</a>

    <br><br><br>
</body>
</html>
